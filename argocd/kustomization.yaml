apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - github.com/argoproj/argo-cd/manifests/cluster-install?ref=v2.3.1

namespace: argocd

configMapGenerator:
  - name: argocd-ssh-known-hosts-cm
    behavior: replace
    files:
      - ssh_known_hosts

patchesStrategicMerge:
  - argocd-cm.yaml
  - secret-argocd-secret.yaml

resources:
  - ingress-argocd.yaml
  - namespace-argocd.yaml
  - sealedsecret-argocd-secret.yaml
  - sealedsecret-repo-dgo19-k3s-demo.yaml
  - servicemonitor-argocd-metrics.yaml
  - servicemonitor-argocd-server-metrics.yaml
  - servicemonitor-argocd-repo-server-metrics.yaml

generatorOptions:
  disableNameSuffixHash: true
